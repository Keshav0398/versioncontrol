<template>
    <div class={messageStyle}>
        <!-- If the download button should be shown, display the button -->
        <template if:true={showDownloadButton}>
            <div class="slds-p-around_medium slds-align_absolute-center">
                <lightning-button 
                    label="Download Runtime Report"
                    variant="brand"
                    class="slds-m-top_medium slds-m-bottom_medium"
                    onclick={handleDownloadClick}>
                </lightning-button>
            </div>
        </template>
        
        <template if:true={voiceComp}>
            <div class="voice-processing-container">
                <!-- Centered Title for the component -->
                <h2 class="slds-text-heading_medium slds-align_absolute-center slds-m-bottom_medium">Alpha BOT - AI Assistant</h2>
                
                <!-- Centered Voice Input Control Buttons -->
                <div class="voice-control-buttons slds-align_absolute-center slds-m-bottom_medium">
                    <lightning-button 
                        label="Start Voice Input" 
                        onclick={startVoiceInput} 
                        class="slds-m-right_small"
                        variant="brand"
                        icon-name="utility:mic"
                        icon-position="left">
                    </lightning-button>
                    
                    <lightning-button 
                        label="Stop Voice Input" 
                        onclick={stopVoiceInput} 
                        variant="destructive"
                        icon-name="utility:close"
                        class="slds-m-right_small"
                        icon-position="left">
                    </lightning-button>
                </div>
                
                <!-- Transcription Display -->
                <div if:true={transcription} class="transcription-output slds-m-bottom_medium">
                    <lightning-formatted-text value={transcription}></lightning-formatted-text>
                </div>
                
                <!-- Spacing between transcription and response button -->
                <div class="slds-m-top_medium"></div>
        
                <!-- Response Play Button -->
                <lightning-button 
                    label="Play Response" 
                    onclick={playResponse} 
                    if:true={response} 
                    variant="neutral"
                    icon-name="utility:play"
                    icon-position="left">
                </lightning-button>
            </div>
        </template>

        
        <!-- Otherwise, display the message content -->
        <template if:false={showDownloadButton}>
            <div>
                <lightning-formatted-rich-text 
                    value={messageContent.value}>
                </lightning-formatted-rich-text>
            </div>
        </template>
    </div>
</template>
